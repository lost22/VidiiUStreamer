 <!DOCTYPE html>
 <html>
 <head>
 <title>VidiiU Settings</title>
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
 <style type="text/css">
 
 @font-face {
	font-family: 'folders';
	src: url(data:application/x-font-woff;charset=utf-8;base64,d09GRk9UVE8AAAQMAAsAAAAABeAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABDRkYgAAABCAAAAN4AAADzcn/d6EZGVE0AAAHoAAAAGgAAABxmelA2R0RFRgAAAgQAAAAdAAAAIAAxAARPUy8yAAACJAAAAEsAAABgL9zcQGNtYXAAAAJwAAAAPQAAAVLgFfLMaGVhZAAAArAAAAAuAAAANvtb7iNoaGVhAAAC4AAAAB4AAAAkBBD/5WhtdHgAAAMAAAAAEAAAABAGAAAAbWF4cAAAAxAAAAAGAAAABgAEUABuYW1lAAADGAAAAOgAAAGqSQhteHBvc3QAAAQAAAAADAAAACAAAwAAeJxjZGBhYWBkZOROy89JSS0qSS0uYWBkYmBksPshx/RDnvmHBEs3D3M3D4scF4NksND/7m44g4e9O/vHlB8lrDIME/llGBgEZBhmCMowcMgwvBZiYAWZwcHAzyDGoMCgVZqX6WpgYAChDIGUG5CHsBHJbgYGxnbGDsZOBhZGRiZlJx++HyZif0y6X3+f8sOkm/VPyGrR719O/05h8z79W6W7+48JK9/3Kyyrf1/5EdK9+vsV1ujTor9TuqtX/3bpzvYGirHydf8oYfkz5ccUdr4fU0S6Rbt5uAAkQFJ6AAB4nGNgYGBkAIIztovOg+izcmGbYTQAR0kGZAAAeJxjYGRgYOADYgkGEGBiYARCZiBmAfMYAARrADYAAAB4nGNgZmJgnMDAysDB6MOYxsDA4A6lvzJIMrQwMDAxsDIzwIEAgskQkOaawuDwgOEDA+OD/w8Y9BgfMCg0MDAwwhUoACEjABBCDB8AeJxjYGBgZoBgGQZGBhDwAfIYwXwWBgMgzQGETCCJB4wfGP7/B7MYICwFRgFmqC4wYGRjQOaOSAAAy5IIsAAAAHicY2BkYGAA4leSd+bG89t8ZeBmYgCBs3JhmxH0/wdMDIwPgFwOBrA0ADi+Ct8AAHicY2BkYGB88P8Bgx4TAwPDPwYgCRRBASwAbegD9wAAAgAAAAIAAAACAAAAAAAAAAAAUAAABAAAeJyFjjFOwzAUhr+0aVELYkLMZmFLZIel9ACdmDp0r1Q3qhTFUpKegRtwDE7BzjE4ABfgd7DEglRLfu/z8+fnB9zwRkZcGUvuE0+4wiWe8shr4lzOR+IZ13wlnrPMFjKzfKHK3fgq8oRbHhJPeeE5cS7nPfFMv34mnqv+zZFAwwFPx6DYK3IMzcF3g+/FWxVrzpL2Utj6+tzsBRs9bCXH3MnwGCpKrPJa+7/GvzeOFYViId8qP6lZaIdN6GpvqtKatfkbQAe3KlxRWSfv4rS78arnNE4X/4oTsfNdfwqtcaW93OQHpc1EBnicY2BmwAsAAH0ABA==) format('woff'),
		 url(data:application/x-font-ttf;charset=utf-8;base64,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) format('truetype');
	font-weight: normal;
	font-style: normal;
}
 
 body{
	 background-color:#313131;
 }
 #header{
	 height: 100px;
	 background-image:url('vidiiu-icon.png');
	 background-repeat:no-repeat;
	 background-size:contain;
	 color:white;
	 text-align:center;
	 font-size:6.5em;
	 font-weight:bolder;
	 overflow:hidden;
	 font-family:monospace;
	 text-shadow:1px 1px 14px black;
 }
 #U{
	 background-color:white;
	 border-radius:15px;
	 color:#313131;
	 font-size:0.7em;
	 position:relative;
	 top:-0.3em;
	 padding:0.05em;
	 text-shadow:none;
	 z-index:-1;
	 box-shadow:1px 1px 14px black;
 }
 #exit{
	 position:absolute;
	 top:0;
	 right:0;
	 font-size:2em;
	 width:2em;
	 height:auto;
	 padding-left:1em;
	 padding-right:1em;
	 padding-top:0.3em;
	 color:white;
	 border-bottom-left-radius: 0.8em;
	 font-weight:bolder;
	 border-color:rgba(255,229,229,0.31);
	 border-bottom-style:solid;
	 border-width:0.2em;
	 border-left-style:solid;
	 cursor: pointer;
	 background: #D90404;
	 -webkit-transition: border-color 0.5s,background 0.5s;
	 
 }
 .shutdown, #exit:hover{
	 border-color:rgba(238,238,238,0.31) !important;
	 background: rgba(75,75,75,1.0) !important;
	 -webkit-transition: border-color 1s,background 1s !important;
 }
 ul{
	 display:block;
	 margin-left:auto;
	 margin-right:auto;
	 width:auto;
	 min-width:34em;

	 text-align:center;
	 margin-top:2em;
	 margin-bottom:0.6em;
 }
 li{
	 display:inline;
	 margin-left:0.1em;
	 padding:0.5em;
	 padding-left:2em;
	 padding-right:2em;
	 border-radius: 0em;
	 font-weight:bold;
	 color:white;
	 font-size:1.2em;
	 text-shadow:1px 0px 2px black;
	 background-color:#b8b8b8;
	 cursor:pointer;
	 box-shadow: inset 0px -4px 3px rgba(0,0,0,0.50);
	 
	 -webkit-transition: box-shadow 0.4s ease-in;
	 
 }
 li:hover{
	box-shadow:inset 0px -5px 5px #20a2d1;
 }
 .selected{
	/**background-color:#36caff;**/
	box-shadow: inset 0px -50px 5px #20a2d1 !important;
	-webkit-transition: box-shadow 1s ease-out, background-color 2s;
	-moz-transition: box-shadow 1s ease-out, background-color 2s;
	-ie-transition: box-shadow 1s ease-out, background-color 2s;
	-o-transition: box-shadow 1s ease-out, background-color 2s;
	transition: box-shadow 1s ease-out, background-color 2s;
	background-color: #20a2d1;
 }
 li:first-child{
	 border-top-left-radius:5px;
 }
 li:last-child{
	 border-top-right-radius:5px;
 }
 #pannelContainer{
 	width:80%;
	position:relative;
	margin-left:auto;
	margin-right:auto;
	display:block;
	margin-bottom:2em;
	
 }
 .cPannel{
	 position:absolute;
	 top:0;
	 width:95%;
	 left:0;
	 border-style:solid;
	 border-color:gray;
	 padding:2em;
	 background-color:#20a2d1;
	 min-height:400px;
	 margin-bottom:2em;
	 text-shadow:1px 0px 2px rgba(157,216,237,1);
	 
	 border-top-right-radius: 5px;
	 border-top-left-radius: 5px;
	 box-shadow:1px 9px 24px black;
 }
 #Guide>H2{
	 color:white;
	 background-color:rgba(255,255,255,0.2);
 }
 #Guide>H3{
	 color:white;
	 text-indent:1em;
	 background-color:rgba(255,255,255,0.1);
 }
 #Guide>p{
	 color:white;
	 text-indent:2em;
	 width:80%;
 }
 #FAQ>H4{
	 color:white;
	 text-shadow:none;
	 background-color:rgba(100,100,100,0.42);
	 font-size:1.2em;
	 text-indent:2em;
	 position:relative;
 }
 #FAQ>H4:before{
 	content:"Q";
 	font-weight:bolder;
 	font-size:2em;
 	position:absolute;
 	left:-1.8em;
 	top:-0.4em;
	 
 }
 #FAQ>H5{
	 text-shadow:none;
	 background-color:rgba(200,200,200,0.42);
	 font-size:1em;
	 position:relative;
 }
 #FAQ>H5:before{
 	content:"A";
 	font-weight:bolder;
 	font-size:2em;
 	position:absolute;
 	left:-0.8em;
 	top:-0.3em;
	 
 }
 .hidden{
	 display:none;
	 pointer-events:none;
 }
 #General{
	 padding-bottom:6em;
 }
 .pathinput{
	 width:60%;
 }
 .removePath{
	 background-color:red;
	 color:white;
	 font-weight:bold;
	 border-radius:10em;
	 padding-right:0.4em;
	 cursor:pointer;
	 margin-left:0.5em;
 }
 .removePath:before{
	 content:"-";
	 padding-left:0.4em;
	 padding-right:0.4em;
	 border-radius:10em;
	 background-color:red;
	 margin-right:0.3em;
	 color:white;
	 font-weight:bold;	
 }
 .removePath:hover, #addpath:hover{
	 box-shadow: 0px 0px 8px white;
	 -webkit-transition: box-shadow 0.8s;
	 -ms-transition: box-shadow 0.8s;
	 -moz-transition: box-shadow 0.8s;
	 -o-transition: box-shadow 0.8s;
	 transition: box-shadow 0.8s;
 }
 .removePath:hover:before, #addpath:hover:before{
	 box-shadow: 0px 0px 8px white;
	 -webkit-transition: box-shadow 0.3s;
	 -ms-transition: box-shadow 0.3s;
	 -moz-transition: box-shadow 0.3s;
	 -o-transition: box-shadow 0.3s;
	 transition: box-shadow 0.3s;
 }
 #addpath:before{
	 content:"+";
	 padding-left:0.2em;
	 padding-right:0.2em;
	 border-radius:10em;
	 background-color:blue;
	 margin-right:0.3em;
	 color:white;
	 font-weight:bold;	 
 }
 #addpath{
	 background-color:blue;
	 color:white;
	 font-weight:bold;
	 border-radius:10em;
	 padding-right:0.4em;
	 cursor:pointer;
 }
 #donate{
	 width:60%;
	 max-width:500px;
	 position:absolute;
	 margin-left:auto;
	 margin-right:auto;
	 bottom:0px;
	 left:20%;
	 text-align:center;
	 background-color:rgba(255,255,255,0.42);
	 bottom:0;
	 box-shadow:0px 0px 10px rgba(255,255,255,0.42);
	 padding:1em;
 }
 #paypalbut{
	 display:inline-block;
	 position:relative;
	 top:5px;
	 padding-top:10px;
 }
 
 #dirMenu{
	 position:absolute;
	 top:20%;
	 height:50%;
	 width:50%;
	 left:25%;
	 background-color:#ececec;
	 border-color:gray;
	 border-style:solid;
	 text-align:center;
	 box-shadow:0px 0px 25px 0px black,0px 0px 0px 1000px rgba(103,103,103,0.9);
 }
 .folder{
 	 color:black;
 	 font-weight:normal;
	 margin-left:15px;
	 text-align:left;
	 border-width:2px;
	 border-top-style:solid;
	 border-top-color:rgba(127,127,127,0.81);
	 border-left-style:solid;
	 border-left-color:gray;
	 margin-top:10px;
	 border-top-left-radius:5px;
	 cursor:pointer;
 }
 .folder:nth-child(2n){
	 background-color:#ebebeb;
 }
 .closed:before{
	font-family: 'folders';
	speak: none;
	font-style: normal;
	font-weight: normal;
	line-height: 1;
	-webkit-font-smoothing: antialiased;
	content: "\e001";
	color:gray;
	padding-left:0.5em;
 }
 .open:before{
 	font-family: 'folders';
	speak: none;
	font-style: normal;
	font-weight: normal;
	line-height: 1;
	-webkit-font-smoothing: antialiased;
	content: "\e000";
	color:gray;
	padding-left:0.5em;
	}
 .clicked{
	 color:blue;
	 font-weight:bold;
	 border-color:blue;
 }	
 #dirView{
	 margin-left:40px;
	 margin-right:40px;
	 border-color:gray;
	 border-style:solid;
	 padding-top:10px;
	 padding-bottom:10px;
	 height:80%;
	 background-color:white;
	 overflow:scroll;
 }
 #selDir{
	 width:70%;
	 border-width:1px;
	 border-style:solid;
	 border-color:black;
	 padding-left:20px;
	 padding-right:20px;
	 background-color:white;
	 text-align:center;
	 box-shadow:0px 0px 14px #6faaee;
 }
 #addButt{
	 position:absolute;
	 right:5px;
	 
	 bottom:5px;
	 height:20px;
	 width:100px
 }
 #cancelButt{
	 position:absolute;
	 left:5px;
	 
	 bottom:5px;
	 height:20px;
	 width:100px
 }
 #slide{
	 width:400px;
 }
 </style>
 <script type="text/javascript">
 
 var views = ['General','Transcoding','Guide','FAQ'];
 var currView = 'General';
 
 function changeView(to){
 	var sH = window.scrollHeight;
 	var sW = window.scrollWidth;
 	document.getElementById(currView).className = 'cPannel hidden';
 	document.getElementById('li'+currView).className = '';
 	currView = to;
 	document.getElementById(currView).className = 'cPannel';
 	document.getElementById('li'+currView).className = 'selected';
 	window.location.hash = to;
 	window.scrollTo(sH,sW);

 }
 
 function sendPOST(message,reciever){
 	var xmlhttp = new XMLHttpRequest();
 	var textMessage = JSON.stringify(message);
	xmlhttp.open("POST",textMessage,true);
	console.log('send message with '+ textMessage);
	xmlhttp.onreadystatechange = function(){
		if (xmlhttp.readyState == 4 && xmlhttp.status == 200){
			console.log(xmlhttp);
			console.log('recieved message with '+ xmlhttp.responseText);
			reciever(JSON.parse(xmlhttp.responseText));
		}
	}
	xmlhttp.send();
 }
 
 function init(){
 	if (window.location.hash == ''){
	 	window.location.hash = 'General';
 	}
	changeView(window.location.hash.replace('#',''));
	openFolder("~");
	updatePaths();
	settingSetup();
	populateQualityButtons();
 }
 function addChildFolder(element,folderInfo){
 	 //assuming folderInfo will be a full on "foo/bar/foobar/bar" deal
 	 var folderName = getFolderNameFromPath(folderInfo);
	 var div = document.createElement('div');
	 div.innerHTML = folderName;
	 if (btoa){
		 div.id = btoa(folderInfo.replace(" ","%20"));
	 }
	 else{
	 	div.id = folderInfo.replace(" ","%20");
	 	}
	 div.className = "folder closed";
	 
	 div.addEventListener('click',function(e){
		 openFolder(folderInfo);
		 console.log(folderInfo,'hi');
		 e.stopPropagation();
		 
	 });
	 div.zIndex = 2000;
	 element.appendChild(div);
 }
 function killChildren(element){
	 while (element.hasChildNodes()) {
		 element.removeChild(element.lastChild);
	 }
 }
 
 function getFolderNameFromPath(path){
 	var fparts = path.split('/');
 	if(fparts.length == 2){return fparts[0];}
 	return fparts[fparts.length-1];
 }
 

 
 function openFolder(folder){
  //check if folder is already in folders
  updateRecentOpen(folder);
  console.log(folder);
  if(folders[folder]){
  	//change class of folder
  	console.log(folder);
  	//add children to folder
  	if (folder == "~"){
	  	var element = document.getElementById('dirView');
	  	
	  	for (var i = 0; i < folders[folder].length;i++ ){
		  	addChildFolder(element,folders[folder][i]);
	  	}
  	}
  	else{
	  	var element = getFolderById(folder);
	  	console.log(element,folder);
	  	element.className = "folder open clicked";
	  	//close all siblings
	  	element.removeEventListener('click');
	  	element.addEventListener('click',function(e){
			closeFolder(folder);
			e.stopPropagation(); 
		});
	  	for (var i = 0; i < folders[folder].length;i++ ){
		  	addChildFolder(element,folders[folder][i]);
	  	}
  	}
  }
  else{
  //send POST
  sendPOST({'dir':folder},addFolder);
  
  }
 }
 
 var base = true;
 
 var sep = "/";
 
 function addFolder(POSTEDfolder){
 	//at this point the folder content is a list
 	var folderContent = POSTEDfolder.content;
 	
 	var folder = POSTEDfolder.dirName;

 	for (var i = 0; i < folderContent.length;i++ ){
 		if (folder != ''){
			folderContent[i] = folder + sep + folderContent[i];}
	}
 	if (base){
 		folder = "~";
	 	base = false;
 	}
 	folders[folder] = folderContent;
	openFolder(folder);
 }
 function closeFolder(folder){
 	//change class of folder
 	//remove children
 	var element = getFolderById(folder);
 	killChildren(element);
 	element.className = "folder closed";
 	if (btoa){
	 	updateRecentOpen(atob(element.parentNode.id).replace("%20"," "))
 	}
 	else{
 	updateRecentOpen(element.parentNode.id.replace("%20"," "));}
 	element.removeEventListener('click');
 	element.addEventListener('click',function(e){
			openFolder(folder);
			e.stopPropagation(); 
		});
 	element.innerHTML = getFolderNameFromPath(folder);
 }
 function browseOpen(num){
 	 var addButton = document.getElementById('addButt');
 	 addButton.setAttribute('onclick', 'addPath('+num+')');
	 var dirMenu = document.getElementById('dirMenu');
	 dirMenu.className = "";
 }
 function browseClose(){
	 dirMenu.className = "hidden";
 }
 
 var folders = {};
 var currentFolder = "";
 
 function getFolderById(id){
 	 if (btoa){
	 	 id = btoa(id.replace(" ","%20"));
 	 }
 	 else{
	 	id = id.replace(" ","%20"); 
 	 }
	 
	 console.log(id);
	 return document.getElementById(id);
 }
 
 function updateRecentOpen(path){
 	document.getElementById('selDir').innerHTML = path;
 }
 
 function sendPaths(){
	 sendPOST({'paths':paths});
 }
 function addPath(num){
 	 var selDir = document.getElementById('selDir');
	 paths[num] = selDir.innerHTML;
	 updatePaths();
	 browseClose();
	 sendPaths();
 }
 
 function updatePaths(){
	 var pathsbox = document.getElementById('pathbox');
	 killChildren(pathsbox);
	 buildPathBoxes(pathsbox);
 }
 
 function buildPathBoxes(element){
	 for (var i = 0; i < paths.length; i++){
	 	console.log(paths[i]);
	 	var input = document.createElement('input');
	 	input.id = "path"+i;
	 	input.type = "text";
	 	input.className = "pathinput";
	 	input.placeholder = "/...";
	 	input.setAttribute("value", paths[i]);
	 	element.appendChild(input);
	 	element.innerHTML += '<button onclick="browseOpen('+i+')" type="button">Browse</button>';
	 	element.innerHTML += '<span class="removePath" onclick="removePath('+i+')">remove</span><br>';
	 }
 }
 function removePath(num){
 	paths.splice(num,1);
 	updatePaths();
 	sendPaths();
 }
 function sendSettings(){
	 sendPOST({'settings':{'sub':sub,'quality':quality,'crf':crf}});
 }
 function subsettings(checked){
	 if (checked){
		 sub = 1;
	 }
	 else{
		 sub = 0;
	 }
	 sendSettings();
 }
 
 function settingSetup(){
     if (sub == 0){
	 	document.getElementById('sub').removeAttribute('checked');}
	 document.getElementById('slide').value = crf;
	 document.getElementById('slide').title = crf;
 }
 
 function qualityButtonHandler(q){
	 quality = q;
	 populateQualityButtons();
	 sendSettings();
 }
 function crfHandler(value){
 	 crf = value;
	 sendSettings();
	 document.getElementById('slide').title = value;
 }
 function populateQualityButtons(){
	 var ele = document.getElementById('qualitybuttons');
	 killChildren(ele);
	 for (var i = qualities.length-1; i >= 0 ;i--){
	 	 var button = document.createElement('button');
	 	 button.type = 'button';
	 	 if (i == quality){
		 	 button.disabled = "true";
	 	 }
	 	 else{
		 	 button.setAttribute("onclick", "qualityButtonHandler("+i+");");
	 	 }
	 	 button.innerHTML = qualities[i];
		 ele.appendChild(button);
	 }
 }
 var qualities = ['ultrafast', 'superfast', 'veryfast', 'faster', 'fast', 'medium', 'slow', 'slower', 'veryslow'];
 //change the next lines in templates;
 var paths = {{PATHS HERE}};
 var sub = {{SUB HERE}};
 var crf = {{CRF HERE}};
 var quality = {{QUAL HERE}};


 dpadImg = document.createElement('img');
 dpadImg.id = "dpadImg";
 dpadImg.src = "Dpad.png";
 dpadImg.setAttribute('style',"position:absolute;width:50%;height:auto;top:15%;right:25%;z-index:200;");
 function showDPad(){
	document.body.appendChild(dpadImg);
 }
 function deleteDPad(){
	document.body.removeChild(document.getElementById('dpadImg'));
 }
function loadDPadControls(){
	window.addEventListener('keydown',function(event){
		if (event.keyCode > 36 && event.keyCode < 41){
			event.preventDefault();
			showDPad();
		}
			
		
	});
	window.addEventListener('keyup',function(event){
		if (event.keyCode == 37){
			deleteDPad();
			//left
			event.preventDefault();
			window.location = "/settings";}
		if (event.keyCode == 38){
			deleteDPad();
			//up
			event.preventDefault();
			window.location = "/";}
		if (event.keyCode == 39){
			deleteDPad();
			//right
			event.preventDefault();}
		if (event.keyCode == 40){
			deleteDPad();
			//down
			event.preventDefault();
			window.location = "/films";}
		
	});
}
loadDPadControls();


 </script>
 
 <!-- range shim for firefox -->
 <script type="text/javascript">
 /*
html5slider - a JS implementation of <input type=range> for Firefox 16 and up
https://github.com/fryn/html5slider

Copyright (c) 2010-2012 Frank Yan, <http://frankyan.com>

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/
 (function(){function l(){a.call(document.querySelectorAll("input[type=range]"),h);(new MutationObserver(function(e){e.forEach(function(e){if(e.addedNodes)a.call(e.addedNodes,function(e){c(e);if(e.childElementCount)a.call(e.querySelectorAll("input"),c)})})})).observe(document,{childList:true,subtree:true})}function c(e){if(e.localName=="input"&&e.type!="range"&&e.getAttribute("type")=="range")h(e)}function h(e){function x(e){c=true;setTimeout(function(){c=false},0);if(e.button||!b)return;var t=parseFloat(getComputedStyle(this,0).width);var n=(t-i.width)/b;if(!n)return;var r=e.clientX-this.getBoundingClientRect().left-i.width/2-(w-m)*n;if(Math.abs(r)>i.radius){l=true;this.value-=-r/n}d=w;v=e.clientX;this.addEventListener("mousemove",T,true);this.addEventListener("mouseup",N,true)}function T(e){var t=parseFloat(getComputedStyle(this,0).width);var n=(t-i.width)/b;if(!n)return;d+=(e.clientX-v)/n;v=e.clientX;l=true;this.value=d}function N(){this.removeEventListener("mousemove",T,true);this.removeEventListener("mouseup",N,true)}function C(e){if(e.keyCode>36&&e.keyCode<41){k.call(this);l=true;this.value=w+(e.keyCode==38||e.keyCode==39?y:-y)}}function k(){if(!c)this.style.boxShadow=!r?"0 0 0 2px #fb0":"inset 0 0 20px rgba(0,127,255,.1), 0 0 1px rgba(0,127,255,.4)"}function L(){this.style.boxShadow=""}function A(e){return!isNaN(e)&&+e==parseFloat(e)}function O(){m=A(e.min)?+e.min:0;g=A(e.max)?+e.max:100;if(g<m)g=m>100?m:100;y=A(e.step)&&e.step>0?+e.step:1;b=g-m;_(true)}function M(){if(!t&&!a)w=e.getAttribute("value");if(!A(w))w=(m+g)/2;w=Math.round((w-m)/y)*y+m;if(w<m)w=m;else if(w>g)w=m+~~(b/y)*y}function _(t){M();if(l&&w!=h)e.dispatchEvent(f);l=false;if(!t&&w==h)return;h=w;var n=b?(w-m)/b*100:0;var r="-moz-element(#__sliderthumb__) "+n+"% no-repeat, ";p(e,{background:r+s})}var t,a,l,c,h,d,v;var m,g,y,b,w=e.value;if(!n){n=document.body.appendChild(document.createElement("hr"));p(n,{"-moz-appearance":r?"scale-horizontal":"scalethumb-horizontal",display:"block",visibility:"visible",opacity:1,position:"fixed",top:"-999999px"});document.mozSetImageElement("__sliderthumb__",n)}var E=function(){return""+w};var S=function D(n){w=""+n;t=true;_();delete e.value;e.value=w;e.__defineGetter__("value",E);e.__defineSetter__("value",D)};e.__defineGetter__("value",E);e.__defineSetter__("value",S);e.__defineGetter__("type",function(){return"range"});["min","max","step"].forEach(function(t){if(e.hasAttribute(t))a=true;e.__defineGetter__(t,function(){return this.hasAttribute(t)?this.getAttribute(t):""});e.__defineSetter__(t,function(e){e===null?this.removeAttribute(t):this.setAttribute(t,e)})});e.readOnly=true;p(e,o);O();(new MutationObserver(function(n){n.forEach(function(n){if(n.attributeName!="value"){O();a=true}else if(!t){w=e.getAttribute("value");_()}})})).observe(e,u);e.addEventListener("mousedown",x,true);e.addEventListener("keydown",C,true);e.addEventListener("focus",k,true);e.addEventListener("blur",L,true)}function p(e,t){for(var n in t)e.style.setProperty(n,t[n],"important")}var e=document.createElement("input");try{e.type="range";if(e.type=="range")return}catch(t){return}e.style.background="linear-gradient(red, red)";if(!e.style.backgroundImage||!("MozAppearance"in e.style)||!document.mozSetImageElement||!this.MutationObserver)return;var n;var r=navigator.platform=="MacIntel";var i={radius:r?9:6,width:r?22:12,height:r?16:20};var s="linear-gradient(transparent "+(r?"6px, #999 6px, #999 7px, #ccc 8px, #bbb 9px, #bbb 10px, transparent 10px":"9px, #999 9px, #bbb 10px, #fff 11px, transparent 11px")+", transparent)";var o={"min-width":i.width+"px","min-height":i.height+"px","max-height":i.height+"px",padding:"0 0 "+(r?"2px":"1px"),border:0,"border-radius":0,cursor:"default","text-indent":"-999999px"};var u={attributes:true,attributeFilter:["min","max","step","value"]};var a=Array.prototype.forEach;var f=document.createEvent("HTMLEvents");f.initEvent("change",true,false);if(document.readyState=="loading")document.addEventListener("DOMContentLoaded",l,true);else l()})()
 </script>
 
 </head>
 <body onload="init()">
 <div id="header">Vidii<span id="U">U</span>Streamer</div>
 <div id="exit" onclick="sendPOST({'shutdown':1});this.className='shutdown'" title="stop the server from running">Stop</div>
 <ul>
 <li id="liGeneral" class="selected" onclick="changeView('General')">General</li>
 <li id="liTranscoding" onclick="changeView('Transcoding')">Transcoding</li>
 <li id="liGuide" onclick="changeView('Guide')">User Guide</li>
 <li id="liFAQ" onclick="changeView('FAQ')">FAQ</li>
 </ul>
 <div id="pannelContainer">
 
 <div id="General" class="cPannel">
 <form>
 Search here for videos:<br>
 <div id="pathbox">
 <input type="text" class="pathinput" placeholder="/..." value="">
 <button onclick="browseOpen(0)" type="button">Browse</button>
 <span class="removePath" onclick="removePath(0)">remove</span><br>
 </div>
 <span id="addpath" onclick="paths.push('');updatePaths();">add path</span><br>
 
 <input type="checkbox" checked name="subfolders" id="sub" onchange="subsettings(this.checked);">Search sub-folders for videos
 </form>
 <div id="donate">
 If you feel like you would have have spent money on this application, and want to support future development you can
 <span id="paypalbut"><form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----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-----END PKCS7-----
">
<input type="image" src="https://www.paypalobjects.com/en_GB/i/btn/btn_donate_LG.gif" border="0" name="submit" alt="PayPal — The safer, easier way to pay online.">
<img alt="" border="0" src="https://www.paypalobjects.com/en_GB/i/scr/pixel.gif" width="1" height="1">
</form></span></div>
 </div>
 
 <div id="Transcoding" class="cPannel hidden">
 <H2>Warning: Transcoding is an experimental feature.</H2>
 <H3>Adjust these settings until you've found a good balance between visual quality and having a stream that doesn't buffer.</H3>
 <form>
 <H4>Change CRF Value</H4>
 <div id="slider">
 18 <input id="slide" type="range" min="18" max="36" value="27" onchange="crfHandler(this.value)"
 /> 36
 </div>
 <div id="presetButtons">
 <H4>Change Quality Preset</H4>
 <div id="qualitybuttons">
 <button type="button">medium</button>
 <button type="button">fast</button>
 <button disabled="true" type="button">faster</button>
 <button type="button">veryfast</button>
 <button type="button">superfast</button>
 <button type="button">ultrafast</button>
 </div>
 
 </div>
 
 </form>
 <p>Adjust these settings for your own computer, if the video plays fine try an option further to the left, if the video is dropping and buffering select an option further to the right.</p>
 <a href="http://ffmpeg.org/trac/ffmpeg/wiki/x264EncodingGuide" target="_blank"> View more information about these settings on the ffmpeg website</a>
 </div>
 
 <div id="Guide" class="cPannel hidden">
 <H2>Starting Up</H2>
 <H3>Setting Paths</H3>
 <p>To set a path click '+ add path' on the General page, then click 'browse' to navigate to the path you wish to select which will be shown in the bottom of the window.</p>
 <p>You can set wether the program should look in subfolders or not here, as well as add additional directories.</p>
 <p>Assuming you have valid video files in the paths you have selected, you have completed setting up the program!</p>
 <H3>Viewing on your WiiU</H3>
 <p>Take note of the URL you are currently on, this is the address you should enter into your WiiU browser. It should be something of the form 10.XX.XX.XX:8000 or 192.XX.XX.XX:8000</p>
 <H2>Navigating Videos</H2>
 <H3>On the WiiU</H3>
 <p>Assuming the program was able to find information about your video files from their filenames the files should now be set out by Show->Season->Episode</p>
 <p>If the program was unable to gather information about the file the file will reside in the "UNKNOWN" section</p>
 <H3>Transcoding Green</H3>
 <p>Files which need to be transcoded to be played on the WiiU appear in green, clicking them will start the transcoding process.</p>
 <p>If you are not happy with the transcoding (either the video looks degraded or buffers/crashes) modifying the settings on the Transcoding tab further left will increase quality but decrease ease and further right will decrease quality but make the transcoding more likely to succeed</p>
 <H3>New</H3>
 <p>Files which have been created in the last 2 days have a 'new' tag on them, this is useful when quickly scanning the entire page using the shoulder buttons.</p>
 <H2>Additional Features</H2>
 <H3>Transcode ALL</H3>
 <p>Press the A button to toggle Transcoding for all files, this can be useful for .mp4 files which refuse to play or have problems with video or audio.</p>
 <H3>D-Pad Navigation</H3>
 <p>Press and hold a direction on the D-Pad to bring up the D-Pad menu. From here you can quickly access the settings, TV Shows, and films pages.</p>
 <H3>Films Page</H3>
 <p>Please note: This will only work if you have content that shows within the "UNKNOWN" section of the TV Show page.</p>
 <p>The films page (accessible either from /films or D-Pad down) is tailored to watching films, it gathers information from Rotten Tomatoes to give more information about the film. The information may not be correct 100% of the time.</p>
 </div>
 <div id="FAQ" class="cPannel hidden">
 
 <H4>Hey, where's the first 10 seconds of my transcoded videos?!</H4>
 <H5>Sorry about that, to work around a bug in the WiiU I have to cut off the first part of the stream. The alternative would be a video that plays at ~3x the actual speed then crashes. If I find a way to work around this i'll update with a patch.</H5>
 
 <H4>My .mp4 video won't play!</H4>
 <H5>mp4 is just a container, the actual video could be in any number of formats - if you press the 'A' button to turn the video green it'll force a Transcode which should enable you to watch it.</H5>
 
 <H4>Why's there no subtitles?</H4>
 <H5>The WiiU doesn't support any sort of closed captions or subtitles for videos, nor does ffmpeg support overlaying subtitles into the video stream. If there's any changes I'll update the application with subtitle support.</H5>
 
 <H4>Why do my Transcodes keep buffering or need to be reopened?</H4>
 <H5>Sounds like your computer and/or network isn't compatible with the Transcode settings you've chosen, try using a faster preset and a higher CRF number.</H5>
 
 <H4>I can't seem to change my path from the settings page?</H4>
 <H5>You'll have to edit the settings manually by finding the config.txt file,also send me an email at <a href="mailto:support@vidiiustreamer.com">support@vidiiustreamer.com</a> describing what happens when you try to click use the 'browse' button's window</H5>
 
 <H4>config.txt file?</H4>
 <H5>On windows it'll be in the folder beside the shortcut to launch the application, on Mac you'll need to right click the app then go 'Show Package Contents' then go 'Content' -> 'Resources'</H5>
 
 <H4>How do I uninstall this?</H4>
 <H5>Just click STOP and delete the folder, then everything's gone.</H5>
 
 </div>
 
 </div>
 
 <div id="dirMenu" class="hidden">
 Select a directory
 <div id="dirView">

 </div>
 <button id="cancelButt" onclick="browseClose()">Cancel</button><span id="selDir">~</span>
 <button id="addButt" type="button" onlick="addPath()">ADD</button>
 </div>
 
 </body>
 </html>